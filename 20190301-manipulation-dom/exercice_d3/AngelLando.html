<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <style>
    .bar-chart {
      background-color: #051c2c;
    }
    </style>
  </head>
  <body>

  <svg id="graph"></svg>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script>
    const graph = d3.select('#graph')

    // Data
    const DATA = [
      { nom: 'Paul', note: 34 },
      { nom: 'Pauline', note: 98 },
      { nom: 'Pierre', note: 74 },
      { nom: 'Pierrette', note: 52 },
    ]

    const yScale = d3.scaleLinear()
    .domain([0, d3.max(DATA, d => d.note)])
    .range([300, 0]) // a été inversé

    // Legend
    graph.append("circle").attr("cx",420).attr("cy",30).attr("r", 6).style("fill", "#00a2ed")
    graph.append("text").attr("x", 440).attr("y", 30).text("Note").style("fill", "#ffffff").attr("alignment-baseline","middle")

    // Graph
    var svgWidth = 500;
    var svgHeight = 300;
    var svg = d3.select('svg')
      .attr("width", svgWidth)
      .attr("height", svgHeight)
      .attr("class", "bar-chart")
      .attr("fill", "#00a2ed")
      .attr("font-family", "Roboto");
      
      var barPadding = 10;
      var barWidth = (svgWidth / DATA.length);

      var barChart = svg.selectAll("rect")
      .data(DATA)
      .enter()
      .append("rect")
      .attr("y", function(d) {
          return svgHeight - d.note;
      })
      .attr("height", function(d) {
          return d.note;
      })
      .attr("width", barWidth - barPadding)
      .attr("transform", function (d, i) {
          var translate = [barWidth * i, 0];
          return "translate("+ translate +")";
      });

      // Texts
      svg.selectAll('text')
      .data(DATA)
      .enter()
      .append('text')
      .attr('x', (d, i) => i * barWidth + barWidth / 2)
      .attr('y', svgHeight - 10)
      .attr('text-anchor', 'middle')
      .attr('fill', 'white')
      .text(d => d.nom);
  </script>
  </body>
</html>